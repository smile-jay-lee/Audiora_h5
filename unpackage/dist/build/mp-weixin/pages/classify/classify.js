"use strict";const e=require("../../common/vendor.js"),t={data:()=>({currentCategory:"all",showFilter:!1,selectedDuration:"",selectedHeat:"",hasMore:!0,page:1,categoryList:[{icon:"📂",name:"全部",type:"all"},{icon:"📚",name:"有声书",type:"book"},{icon:"🎵",name:"音乐",type:"music"},{icon:"🎙️",name:"播客",type:"podcast"},{icon:"📰",name:"新闻",type:"news"},{icon:"🧘",name:"冥想",type:"meditation"},{icon:"🏃",name:"运动",type:"sport"},{icon:"👶",name:"儿童",type:"children"},{icon:"🎭",name:"戏曲",type:"opera"}],durationOptions:[{label:"全部",value:""},{label:"短篇(< 30分钟)",value:"short"},{label:"中篇(30-60分钟)",value:"medium"},{label:"长篇(> 60分钟)",value:"long"}],heatOptions:[{label:"全部",value:""},{label:"最新",value:"latest"},{label:"最热",value:"hottest"},{label:"评分最高",value:"highest"}],allContentList:[{id:1,title:"三体：黑暗森林",author:"刘慈欣",cover:"/static/audio1.jpg",duration:"15:30:45",category:"book",views:"12.5万",likes:"8.2千",isFavorited:!1},{id:2,title:"夜听故事",author:"夜听主播",cover:"/static/audio2.jpg",duration:"25:20",category:"podcast",views:"8.9万",likes:"5.6千",isFavorited:!0},{id:3,title:"轻松爵士乐",author:"爵士乐团",cover:"/static/audio3.jpg",duration:"1:45:30",category:"music",views:"6.3万",likes:"4.1千",isFavorited:!1},{id:4,title:"睡前冥想",author:"冥想导师",cover:"/static/audio4.jpg",duration:"18:00",category:"meditation",views:"15.2万",likes:"12.8千",isFavorited:!0},{id:5,title:"今日新闻摘要",author:"新闻播报员",cover:"/static/audio5.jpg",duration:"12:30",category:"news",views:"23.6万",likes:"3.2千",isFavorited:!1},{id:6,title:"儿童故事大全",author:"故事姐姐",cover:"/static/audio6.jpg",duration:"35:45",category:"children",views:"18.7万",likes:"15.3千",isFavorited:!1}]}),computed:{filteredList(){let e=this.allContentList;return"all"!==this.currentCategory&&(e=e.filter((e=>e.category===this.currentCategory))),this.selectedDuration&&(e=e.filter((e=>{const t=this.parseDuration(e.duration);switch(this.selectedDuration){case"short":return t<30;case"medium":return t>=30&&t<=60;case"long":return t>60;default:return!0}}))),e}},onLoad(){this.loadContent()},methods:{switchCategory(e){this.currentCategory=e},getCategoryName(e){const t=this.categoryList.find((t=>t.type===e));return t?t.name:""},showFilterPopup(){this.showFilter=!0},hideFilterPopup(){this.showFilter=!1},showSortPopup(){e.index.showActionSheet({itemList:["最新发布","最多播放","最多收藏","时长最短","时长最长"],success:e=>{console.log("选择了排序方式:",e.tapIndex),this.sortContent(e.tapIndex)}})},selectDuration(e){this.selectedDuration=e},selectHeat(e){this.selectedHeat=e},resetFilter(){this.selectedDuration="",this.selectedHeat=""},applyFilter(){this.hideFilterPopup()},toggleFavorite(t){t.isFavorited=!t.isFavorited,e.index.showToast({title:t.isFavorited?"已收藏":"已取消收藏",icon:"none"})},playContent(t){e.index.showToast({title:`正在播放: ${t.title}`,icon:"none"})},parseDuration(e){const t=e.split(":");return 3===t.length?60*parseInt(t[0])+parseInt(t[1]):2===t.length?parseInt(t[0]):0},sortContent(t){console.log("排序类型:",t),e.index.showToast({title:"排序完成",icon:"none"})},loadContent(){console.log("加载分类内容")},loadMore(){this.hasMore&&setTimeout((()=>{this.page++,console.log("加载更多内容, 页码:",this.page),this.page>=3&&(this.hasMore=!1)}),1e3)}}};const o=e._export_sfc(t,[["render",function(t,o,i,a,r,s){return e.e({a:e.f(r.categoryList,((t,o,i)=>({a:e.t(t.icon),b:e.t(t.name),c:o,d:r.currentCategory===t.type?1:"",e:e.o((e=>s.switchCategory(t.type)),o)}))),b:e.o(((...e)=>s.showFilterPopup&&s.showFilterPopup(...e))),c:e.o(((...e)=>s.showSortPopup&&s.showSortPopup(...e))),d:e.f(s.filteredList,((t,o,i)=>({a:t.cover,b:e.t(t.title),c:e.t(t.author),d:e.t(s.getCategoryName(t.category)),e:e.t(t.duration),f:e.t(t.views),g:e.t(t.likes),h:e.t(t.isFavorited?"❤️":"🤍"),i:t.isFavorited?1:"",j:e.o((e=>s.toggleFavorite(t)),o),k:e.o((e=>s.playContent(t)),o),l:o,m:e.o((e=>s.playContent(t)),o)}))),e:r.hasMore},(r.hasMore,{}),{f:e.o(((...e)=>s.loadMore&&s.loadMore(...e))),g:r.showFilter},r.showFilter?{h:e.o(((...e)=>s.hideFilterPopup&&s.hideFilterPopup(...e))),i:e.f(r.durationOptions,((t,o,i)=>({a:e.t(t.label),b:t.value,c:r.selectedDuration===t.value?1:"",d:e.o((e=>s.selectDuration(t.value)),t.value)}))),j:e.f(r.heatOptions,((t,o,i)=>({a:e.t(t.label),b:t.value,c:r.selectedHeat===t.value?1:"",d:e.o((e=>s.selectHeat(t.value)),t.value)}))),k:e.o(((...e)=>s.resetFilter&&s.resetFilter(...e))),l:e.o(((...e)=>s.applyFilter&&s.applyFilter(...e))),m:e.o((()=>{})),n:e.o(((...e)=>s.hideFilterPopup&&s.hideFilterPopup(...e)))}:{})}]]);wx.createPage(o);
