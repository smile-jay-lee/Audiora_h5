{"version":3,"file":"reset.js","sources":["pages/reset/reset.vue","../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVzZXQvcmVzZXQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"reverse-bg\">\r\n    <view class=\"reverse-mask\">\r\n      <view class=\"reverse-card\">\r\n        <view class=\"reverse-title\">\r\n          <view class=\"reverse-title-bar\"></view>\r\n          <text>修改密码</text>\r\n        </view>\r\n        <view class=\"reverse-form\">\r\n          <view class=\"reverse-label\">*设置新密码</view>\r\n          <view class=\"reverse-input-row\">\r\n            <input class=\"reverse-input\" :type=\"showPwd1 ? 'text' : 'password'\" v-model=\"oldPwd\" placeholder=\"请输入原密码\" />\r\n            <view class=\"reverse-eye\" @click=\"showPwd1 = !showPwd1\">\r\n              <uni-icons :type=\"showPwd1 ? 'eye' : 'eye-slash'\" size=\"24\" color=\"#bbb\" />\r\n            </view>\r\n          </view>\r\n          <!-- <view class=\"form\">\r\n            <uni-easyinput type=\"password\" v-model=\"password\" :passwordIcon=\"true\" placeholder=\"请输入密码\"\r\n              :clearable=\"false\" /> -->\r\n          <!-- </view> -->\r\n          <view class=\"reverse-label\">*设置新密码</view>\r\n          <view class=\"reverse-input-row\">\r\n            <input class=\"reverse-input\" :type=\"showPwd2 ? 'text' : 'password'\" v-model=\"newPwd\" placeholder=\"请输入新密码\" />\r\n            <view class=\"reverse-eye\" @click=\"showPwd2 = !showPwd2\">\r\n              <uni-icons :type=\"showPwd2 ? 'eye' : 'eye-slash'\" size=\"24\" color=\"#bbb\" />\r\n            </view>\r\n          </view>\r\n          <view class=\"reverse-label\">*确认新密码</view>\r\n          <view class=\"reverse-input-row\">\r\n            <input class=\"reverse-input\" :type=\"showPwd3 ? 'text' : 'password'\" v-model=\"confirmPwd\"\r\n              placeholder=\"请输入新密码\" />\r\n            <view class=\"reverse-eye\" @click=\"showPwd3 = !showPwd3\">\r\n              <uni-icons :type=\"showPwd3 ? 'eye' : 'eye-slash'\" size=\"24\" color=\"#bbb\" />\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <button class=\"reverse-btn\" @click=\"resetPwd\">立即重置</button>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { request } from '@/utils/request.js'\r\nimport uniEasyinput from '@dcloudio/uni-ui/lib/uni-easyinput/uni-easyinput.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      userId: uni.getStorageSync('userId'),\r\n      oldPwd: '',\r\n      newPwd: '',\r\n      confirmPwd: '',\r\n      showPwd1: false,\r\n      showPwd2: false,\r\n      showPwd3: false,\r\n      password: '',\r\n      components: { uniEasyinput },\r\n     }\r\n  },\r\n  methods: {\r\n    async resetPwd() {\r\n      if (!this.oldPwd || !this.newPwd || !this.confirmPwd) {\r\n        uni.showToast({ title: '请填写完整信息', icon: 'none' })\r\n        return\r\n      }\r\n      if (this.newPwd !== this.confirmPwd) {\r\n        uni.showToast({ title: '两次新密码不一致', icon: 'none' })\r\n        return\r\n      }\r\n\r\n      uni.showLoading({ title: '重置中...' })\r\n      try {\r\n        const url = '/api/user/changePassword?userId=' + encodeURIComponent(this.userId) +\r\n          '&oldPassword=' + encodeURIComponent(this.oldPwd) +\r\n          '&newPassword=' + encodeURIComponent(this.newPwd) +\r\n          '&confirmPassword=' + encodeURIComponent(this.confirmPwd)\r\n        const res = await request({\r\n          url: url,\r\n          method: 'PUT',\r\n        })\r\n        \r\n        //这个页面停很久\r\n        // uni.showToast({ title: `重置成功，用户ID：${this.userId}`, icon: 'success', duration: 200000 })\r\n        console.log('返回的消息：', res.data)\r\n\r\n        uni.hideLoading()\r\n        if (res.data && res.data.code === \"200\") {\r\n          uni.showToast({ title: res.data.data || '密码修改成功', icon: 'success' })\r\n          uni.reLaunch({ url: '/pages/login/login' })\r\n        } else {\r\n          uni.showToast({ title: res.data.msg || '修改失败', icon: 'none' })\r\n        }\r\n      } catch (e) {\r\n        uni.hideLoading()\r\n        uni.showToast({ title: '网络错误', icon: 'none' })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.reverse-bg {\r\n  position: relative;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  background: linear-gradient(180deg, #eae6fa 0%, #bfc8f7 100%);\r\n}\r\n\r\n.reverse-mask {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 2;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.reverse-card {\r\n  width: 90vw;\r\n  max-width: 420px;\r\n  background: rgba(255, 255, 255, 0.7);\r\n  border-radius: 32px;\r\n  box-shadow: 0 8px 32px rgba(98, 0, 234, 0.08);\r\n  padding: 48px 32px 32px 32px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.reverse-title {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  color: #222;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.reverse-title-bar {\r\n  width: 6px;\r\n  height: 28px;\r\n  background: linear-gradient(90deg, #9c7af0 0%, #6200ea 100%);\r\n  border-radius: 3px;\r\n  margin-right: 12px;\r\n}\r\n\r\n.reverse-form {\r\n  width: 100%;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.reverse-label {\r\n  font-size: 16px;\r\n  color: #222;\r\n  margin-bottom: 8px;\r\n  font-weight: 500;\r\n}\r\n\r\n.reverse-input-row {\r\n  width: 100%;\r\n  position: relative;\r\n  margin-bottom: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n\r\n.reverse-input {\r\n  /* display: none; */\r\n  width: 100%;\r\n  height: 44px;\r\n  border-radius: 12px;\r\n  background: #fff;\r\n  border: none;\r\n  outline: none;\r\n  font-size: 16px;\r\n  color: #333;\r\n  padding: 0 16px;\r\n  box-sizing: border-box;\r\n  box-shadow: 0 2px 8px rgba(98, 0, 234, 0.04);\r\n}\r\n\r\n.reverse-eye {\r\n  position: absolute;\r\n  right: 12px;\r\n  top: 10px;\r\n  z-index: 3;\r\n}\r\n\r\n.reverse-btn {\r\n  width: 100%;\r\n  height: 48px;\r\n  background: linear-gradient(90deg, #9c7af0 0%, #6200ea 100%);\r\n  color: #fff;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  border: none;\r\n  border-radius: 24px;\r\n  margin-top: 8px;\r\n  box-shadow: 0 4px 16px rgba(98, 0, 234, 0.12);\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/project/Audiora/Audiora_h5_/pages/reset/reset.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","request"],"mappings":";;;AA4CA,qBAAqB,MAAW;AAChC,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,QAAQA,cAAAA,MAAI,eAAe,QAAQ;AAAA,MACnC,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,MACV,YAAY,EAAE,aAAc;AAAA,IAC7B;AAAA,EACF;AAAA,EACD,SAAS;AAAA,IACP,MAAM,WAAW;AACf,UAAI,CAAC,KAAK,UAAU,CAAC,KAAK,UAAU,CAAC,KAAK,YAAY;AACpDA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAChD;AAAA,MACF;AACA,UAAI,KAAK,WAAW,KAAK,YAAY;AACnCA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,QAAQ;AACjD;AAAA,MACF;AAEAA,oBAAAA,MAAI,YAAY,EAAE,OAAO,UAAU;AACnC,UAAI;AACF,cAAM,MAAM,qCAAqC,mBAAmB,KAAK,MAAM,IAC7E,kBAAkB,mBAAmB,KAAK,MAAM,IAChD,kBAAkB,mBAAmB,KAAK,MAAM,IAChD,sBAAsB,mBAAmB,KAAK,UAAU;AAC1D,cAAM,MAAM,MAAMC,sBAAQ;AAAA,UACxB;AAAA,UACA,QAAQ;AAAA,SACT;AAIDD,sBAAY,MAAA,MAAA,OAAA,+BAAA,UAAU,IAAI,IAAI;AAE9BA,sBAAAA,MAAI,YAAY;AAChB,YAAI,IAAI,QAAQ,IAAI,KAAK,SAAS,OAAO;AACvCA,8BAAI,UAAU,EAAE,OAAO,IAAI,KAAK,QAAQ,UAAU,MAAM,WAAW;AACnEA,wBAAAA,MAAI,SAAS,EAAE,KAAK,sBAAsB;AAAA,eACrC;AACLA,8BAAI,UAAU,EAAE,OAAO,IAAI,KAAK,OAAO,QAAQ,MAAM,QAAQ;AAAA,QAC/D;AAAA,MACF,SAAS,GAAG;AACVA,sBAAAA,MAAI,YAAY;AAChBA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGA,GAAG,WAAW,eAAe;"}